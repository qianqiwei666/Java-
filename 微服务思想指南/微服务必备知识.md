# 一、CAP理论

## 一、一致性(Consistency) [kənˈsɪstənsi]

> 集群中,所有的机器中的数据是一样的。

## 二、可用性(Availability) [əˌveɪlə'bɪləti]

> 用户请求服务的时候,都能请求到数据,但不能保证是最新的数据。

## 三、分区容错性(Partition tolerance)[pɑːˈtɪʃn ˈtɒlərəns] 

> 集群中的某一台机器由于网络,或者其他因素导致服务不可用,但不会导致集群中所有的服务都不可用。

## 四、CP

> 数据同步的时候,外界不能访问当前集群服务,直到数据同步完成。
>
> 如果同步的时候因为网络因素导致同步时间过长,外界等待就越长。
>
> 如果某一个机器突然宕掉,直接返回出错。

## 五、AP

> 数据同步的时候,外界可以对其进行访问。如果有机器宕掉了,也不影响整体的操作。
>
> 缺点就是可能某些机器因网络因素导致同步不及时,导致客户端拿取数据可能还是原来的数据。

## 六、AC

> 常用于单机模式

# 二、拓展

## 一、垂直拓展

> 在同一个机器上,对计算以及硬件上的拓展。
>
> 比如计算不够添加cpu,io不够添加硬盘。

## 二、水平拓展

> 如果当前集群压力过大,添加机器来进行缓解压力。

# 三、高可用

> 在服务集群中,即使有一个服务宕掉也不会影响整体业务。

# 四、负载均衡

> 当前机器随机调用服务集群。

# 五、状态

## 一、无状态

> 客户端调用服务的时候,客户端必须自备描述信息,服务端通过客户端的描述信息来验证身份。
>
> 优点:可水平拓展,服务端不必存储客户端的信息。
>
> 体现:token 

## 二、有状态

> 客户端调用服务的时候,服务端需要从内存中取出session与客户端进行比对,来验证客户端的身份。
>
> 缺点:服务端变得特别臃肿(session都存储到内存里),不利于水平拓展。
>
> 体现:tomcat的session

# 六、一致性

## 一、强一致性

> 集群之间必须做到同步,在同步的期间不会对外提供服务。直到数据同步完成。

## 二、弱一致性

> 数据更新后,数据可能同步不及时,或者说部分机器同步数据。

## 三、最终一致性

> 数据更新的时候,可能某些机器同步不及时,但是最终数据会同步到所有的机器上面。

# 七、轮询,长轮询

## 一、轮询

> 轮询:客户端每隔多少秒向服务器发送请求,然后的到数据。
>
> 缺点:
>
> 1. 数据获取不及时:如果服务器产生新的数据,由于固定时间获取,导致数据延迟
> 2. 压力:对服务器的压力变得很大。
> 3. 无效数据:如果客户端没有新的数据,你还获取,获取的数据注定无用！

## 二、长轮询

> 长轮询:在固定时间之内,当客户端与服务端建立起链接,服务器就会hold住这个链接(阻塞),请求数据与响应数据都是通过这个链接进行的。
>
> 优点:数据响应及时。

# 八、长链接与短链接

## 一、长链接

> 长链接:客户端与服务端永久建立起链接,请求数据与响应数据都是通过这个链接来进行的。

## 二、短链接

> 当客户端要发送请求到服务端的时候,这时候才建立起链接,当数据响应完成之后,链接也就断开了
